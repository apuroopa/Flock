@model dynamic
@{
    ViewBag.Title = "Let's flock";
    Layout = "../Shared/_Layout.cshtml";
}
<link href="~/Content/FlockApplication.css" rel="stylesheet" />
<div class="container">
    <div class="row-fluid">
        <div class="span12">
            <div class="navbar navbar-inverse">
                <div class="navbar-inner">
                    <div class="container" style="width: auto;">
                        <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                        </a>
                        <div class="nav-collapse">
                            <ul class="nav">
                                <li><a class="brand active" href="#" onclick="location.reload();">Flock</a></li>
                            </ul>

                            <ul class="nav pull-right">
                                <li class="divider-vertical"></li>
                                <li><a href="#"><i class="icon-user icon-white"></i></a></li>
                                <li><a href="#">About</a></li>
                                <li><a href="#">Contact</a></li>
                            </ul>
                        </div><!-- /.nav-collapse -->
                    </div>
                </div><!-- /navbar-inner -->
            </div><!-- /navbar -->
        </div>
    </div>
</div>

<div class="container" ng-controller="messageController">
    <div class="row-fluid" ng-show="isUserNotSelected">
        <div class="well span12">
            <div><h3>Welcome, Let's flock together </h3></div>
            <div class="row-fluid control-group" id="userSelection" ng-show="isUserNotSelected">
                <span class="control-label"><strong>Select Sample User: </strong></span>
                <div class="controls input-append">
                    <select class="input-medium" id="users-dropdown" ng-model="selectedUser" ng-options="user.name as user.name for user in sampleUsers"></select>
                    <button class="btn btn-success" ng-click="enterFlock()">
                        <i class="icon-user icon-white"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>
    <div class="row-fluid" ng-show="!isUserNotSelected">
        <div class="well span6">
            <div>
                <h6><span class="text-success">{{maxCharacters - messageContent.length}}</span> characters remaining...</h6>
                <textarea class="span12" style="resize: none" placeholder="by saying something here..." rows="2" ng-model="messageContent" on-enter="saveMessage()" maxlength="140"></textarea>
            </div>
        </div>
        <div class="well span2 text-center pull-right" ng-show="!isUserNotSelected">
            <h3><img alt="{{selectedUser}}" src="~/Content/Images/avatar.gif" class="img-circle" style="max-height: 60px;" /> </h3>
            <b class="control-group.success control-label">{{selectedUser}}</b>
        </div>
    </div>
    <div class="row-fluid">
        <div class="span3">
            <div class="info_wrapper">
                <p class="sidebar_title"><a href="#" title="flock"><img src="~/Content/Images/avatar.gif" width="20" height="20" alt="flocker"></a>{{selectedUser}}</p>
                <div class="flocker">
                    <div class="info">
                        <p class="user text-info">"Message information...."</p>
                        <p class="days">Few hours ago</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="row-fluid">
        <div class="span6" ng-show="!isUserNotSelected">
            <div id="FlockPageContent">
                <div class="well messageSection" ng-repeat="message in messages">
                    <div class="row-fluid">
                        <div class="span4 text-success">{{message.lastUpdated}}</div>
                        <div id="cheersLikeIt" ng-show="message.usersLiked.length" class="span4 show">
                            <span style="font-size: 20px">&#9786;</span>  <a href="#" rel="tooltip" data-placement="right" title="title" set-title>{{message.usersLiked.length}} likes</a>
                        </div>
                    </div>
                    <div class="row-fluid">
                        <div class="span12 greyColor">
                            <blockquote>
                                <div class="messageContent">{{message.content}}</div>
                                <small>{{message.user}}</small>
                            </blockquote>
                        </div>
                    </div>
                    <div class="row-fluid">
                        <div class="span4">
                            <a href="#shoutOutLoudWindows" ng-click="shoutOutLoud(message)" data-toggle="modal"><i class="icon-volume-up"></i> Shout out loud</a>
                        </div>
                        <div class="span4">
                            <a href="" ng-click="likeMessage(message)" ng-show="!checkLikeStatus(message)"><i class="icon-thumbs-up"></i> Cheers, like it! </a>
                            <a href="" ng-click="unlikeMessage(message)" ng-show="checkLikeStatus(message)"><i class="icon-thumbs-down"></i> Unlike it! </a>
                        </div>
                        <div class="span4">
                            <a href="" ng-click="showCommentsText(message)"><img alt="{{selectedUser}}" src="~/Content/Images/duck.png" class="img-circle" style="max-height: 16px;" />Quack</a>
                        </div>
                    </div>
                    <div class="row-fluid" ng-repeat="comment in message.comments">
                        <label> -- {{comment}}</label>
                    </div>
                    <div ng-show="message.showCommentTextbox">
                        <strong>{{selectedUser}} Says:</strong><h6><span class="text-success">{{maxCharacters - message.userComment.length}}</span> characters remaining...</h6>
                        <textarea class="span12 messageComment" style="resize: none" placeholder="Your Quack..." rows="2" ng-model="message.userComment" on-enter="saveComments(message)" maxlength="100"></textarea>
                    </div>
                </div>
                <div id="shoutOutLoudWindows" class="modal hide fade">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                        <h3>Good find, let's share...</h3>
                    </div>
                    <div class="modal-body row-fluid">
                        <h6><span class="text-success">{{maxCharacters - originalAuthorSays.length}}</span> characters remaining...</h6>
                        <textarea class="span12 messageComment" style="resize: none" rows="2" maxlength="140" ng-model="originalAuthorSays"></textarea>
                    </div>
                    <div class="modal-footer">
                        <div class="btn btn-primary" data-dismiss="modal" ng-click="shareMessage()">Shout out loud</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="row-fluid">
        <div class="span12" style="text-align: center;">
            <hr>
            <span class="well-small text-center">&copy; Copyright 2013 Automatic Data Processing, Inc.</span>
        </div>
    </div>
</div>
